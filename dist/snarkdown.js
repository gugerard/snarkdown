function e(e){return e.replace(RegExp("^"+(e.match(/^(\t| )+/)||"")[0],"gm"),"")}function n(e){return(e+"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function r(a,c){function o(e){var n=t[e.replace(/\*/g,"_")[1]||""],r=h[h.length-1]==e;return n?n[1]?(h[r?"pop":"push"](e),n[0|r]):n[0]:e}function l(){for(var e="";h.length;)e+=o(h[h.length-1]);return e}var g,s,p,u,m,i=/((?:^|\n+)(?:\n---+|\* \*(?: \*)+)\n)|(?:^```(\w*)\n([\s\S]*?)\n```$)|((?:(?:^|\n+)(?:\t|  {2,}).+)+\n*)|((?:(?:^|\n)([>*+-]|\d+\.)\s+.*)+)|(?:\!\[([^\]]*?)\]\(([^\)]+?)\))|(\[)|(\](?:\(([^\)]+?)\))?)|(?:(?:^|\n+)([^\s].*)\n(\-{3,}|={3,})(?:\n+|$))|(?:(?:^|\n+)(#{1,3})\s*(.+)(?:\n+|$))|(?:`([^`].*?)`)|(  \n\n*|\n{2,}|__|\*\*|[_*])/gm,h=[],f="",$=c||{},d=0;for(a=a.replace(/^\[(.+?)\]:\s*(.+)$/gm,function(e,n,r){return $[n.toLowerCase()]=r,""}).replace(/^\n+|\n+$/g,"");p=i.exec(a);)s=a.substring(d,p.index),d=i.lastIndex,g=p[0],s.match(/[^\\](\\\\)*\\$/)||(p[3]||p[4]?g='<pre class="code '+(p[4]?"poetry":p[2].toLowerCase())+'">'+e(n(p[3]||p[4]).replace(/^\n+|\n+$/g,""))+"</pre>":p[6]?(m=p[6],m.match(/\./)&&(p[5]=p[5].replace(/^\d+/gm,"")),u=r(e(p[5].replace(/^\s*[>*+.-]/gm,""))),">"===m?m="blockquote":(m=m.match(/\./)?"ol":"ul",u=u.replace(/^(.*)(\n|$)/gm,"<li>$1</li>")),g="<"+m+">"+u+"</"+m+">"):p[8]?g='<img src="'+n(p[8])+'" alt="'+n(p[7])+'">':p[10]?(f=f.replace("<a>",'<a href="'+n(p[11]||$[s.toLowerCase()])+'">'),g=l()+"</a>"):p[9]?g="<a>":p[12]||p[14]?(m="h"+(p[14]?p[14].length:"="===p[13][0]?1:2),g="<"+m+">"+r(p[12]||p[15],$)+"</"+m+">"):p[16]?g="<code>"+n(p[16])+"</code>":(p[17]||p[1])&&(g=o(p[17]||"--"))),f+=s,f+=g;return(f+a.substring(d)+l()).trim()}var t={"":["<em>","</em>"],_:["<strong>","</strong>"],"\n":["<br />"]," ":["<br />"],"-":["<hr />"]};module.exports=r;
//# sourceMappingURL=snarkdown.js.map